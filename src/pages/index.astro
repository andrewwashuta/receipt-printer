---
import BaseLayout from '../layouts/BaseLayout.astro';
import Intro from '../pages/index/intro.astro';
import Now from '../pages/index/now.astro';
import Work from '../pages/index/work.astro';
---
<BaseLayout>
	<aside class="side-nav">
		<nav>
		  <ul>
			<li><a href="#intro">Intro</a></li>
			<li><a href="#now">Now</a></li>
			<li><a href="#work">Work</a></li>
			<li><a href="#photo">Photography</a></li>
			<li><a href="#fun">Fun</a></li>
			<li><a href="#misc">Misc</a></li>
		  </ul>
		</nav>
	  </aside>

	  <main>
		<header>
			<h1>Andrew Washuta</h1>
			<p>Product Designer</p>
		</header>

		<Intro />
		<Now />
		<Work />
	  </main>

</BaseLayout>

<script>
  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.side-nav a');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        navLinks.forEach(link => link.classList.remove('active'));
        const activeLink = document.querySelector(`.side-nav a[href="#${entry.target.id}"]`);
        if (activeLink) activeLink.classList.add('active');
      }
    });
  }, { threshold: 0.5 });

  sections.forEach(section => observer.observe(section));
</script>
