---
import { Image } from 'astro:assets';

interface Props {
    id: string;
    imageUrl?: ImageMetadata;
    imageAlt?: string;
    width?: number;
    height?: number;
}

const { id, imageUrl, imageAlt, width, height } = Astro.props;
---

<div class="modal" data-modal-id={id} role="dialog" aria-modal="true">
    <div class="modal-backdrop"></div>
    <div class="modal-container">
        {imageUrl && (
            <Image 
                src={imageUrl} 
                alt={imageAlt || ''} 
                quality={100}
                class="modal-image"
                loading="eager"
                {...(width ? { width } : {})}
                {...(height ? { height } : {})}
            />
        )}
    </div>
</div>

<style>
    .modal {
        position: fixed;
        inset: 0;
        z-index: var(--z-modal);
        display: none;
    }
    .modal.visible {
        display: flex;
    }
    .modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(40, 39, 38, 0.85); /* or use var(--color-ink-primary) with opacity */
        z-index: 1;
    }
    .modal-container {
        position: relative;
        z-index: 2;
        width: 100vw;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
    }
    .modal-image {
        height: 90vh;
        width: auto;
        max-width: 90vw;
        object-fit: contain;
        display: block;
        margin: auto;
        box-shadow: var(--shadow-lg);
        pointer-events: auto;
    }
</style> 