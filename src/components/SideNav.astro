---
import { Image } from "astro:assets";
import wLogo from '../assets/w.svg'
import wLogoHover from '../assets/w-hover.svg'
import Icon from './Icon.astro'

interface Props {
  variant?: 'sidebar' | 'mobile';
  navItems?: Array<{ id: string; label: string }>;
  showHomeLink?: boolean;
  homeLinkText?: string;
  backNavigation?: boolean;
}

const { 
  variant = 'sidebar', 
  navItems = [
    { id: 'intro', label: 'Intro' },
    { id: 'now', label: 'Now' },
    { id: 'experience', label: 'Experience' },
    { id: 'projects', label: 'Projects' },
    { id: 'education', label: 'Education' }
  ],
  showHomeLink = false,
  homeLinkText = 'Index',
  backNavigation = false
} = Astro.props;
---

{variant === 'sidebar' && (
  <aside class="side-nav">
      <nav>
          {showHomeLink ? (
            backNavigation ? (
              <a href="#" class="home-link" onclick="document.documentElement.style.scrollBehavior = 'auto'; history.back(); setTimeout(() => { window.scrollTo(0, 0); document.documentElement.style.scrollBehavior = 'smooth'; }, 100); return false;">
                <Icon name="jump-arrow" />
                <span>Back</span>
              </a>
            ) : (
              <a href="/" class="home-link">
                <Icon name="jump-arrow" />
                <span>{homeLinkText}</span>
              </a>
            )
          ) : (
            <a href="#top" class="logo-container">
              <Image 
                src={wLogo} 
                alt="A cursive W logo" 
                height={24}
                class="w-logo"
              />
              <Image 
                src={wLogoHover} 
                alt="A cursive W logo" 
                height={24}
                class="w-logo hover"
              />
            </a>
          )}
              <ul>
                  {navItems.map(item => (
                    <li>
                      <a href={`#${item.id}`} class="section-link">
                        {item.label}
                      </a>
                    </li>
                  ))}
              </ul>
      </nav>
  </aside>
)}

{variant === 'mobile' && (
  <nav class="mobile-nav">
      {navItems.map((item, index) => (
        <>
          <a href={`#${item.id}`}>{item.label}</a>
          {index < navItems.length - 1 && ', '}
        </>
      ))}
  </nav>
)}

<style>
 .side-nav {
  position: fixed;
  top: var(--size-xxl);
  left: var(--size-xxl);
  z-index: 100;
  
  @media (max-width: 1000px) {
    display: none;
  }

  nav {
    ul {
      list-style: none;
      
      li {
        margin-bottom: var(--size-xs);
        position: relative;
        display: flex;
        align-items: center;
        gap: var(--size-xxs);
        
        a {
          text-decoration: none;
        }
      }
    }

    .home-link {
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: var(--size-xs);
      color: var(--color-ink);
      margin-bottom: var(--size-lg);
      
      &:hover,
      &:focus {
        color: var(--color-accent-dark);
        outline: none;
      }
    }
  }

  .logo-container {
    display: flex;
    justify-content: left;
    align-items: left;
    margin-bottom: var(--size-lg);
    width: fit-content;
  }

  .logo-container:hover,
  .logo-container:focus {
    .w-logo {
      opacity: 0;
      
      &.hover {
        opacity: 1;
      }
    }
  }

  .logo-container:active {
    transform: scale(0.92);
  }

  .logo-container:focus {
    outline: none;
  }

  .w-logo {
    filter: drop-shadow(1px 1px 4px rgba(76, 76, 76, 0.16));
    transition: opacity 1s ease;

    &.hover {
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
    }
  }

}

.mobile-nav {
    display: none;
    
    @media (max-width: 1000px) {
        display: block;
        font-weight: var(--font-weight-medium);
        margin-top: var(--size-lg);
        margin-bottom: calc(-1 * var(--size-lg));
    }
}
</style> 