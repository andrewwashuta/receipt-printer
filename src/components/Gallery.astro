import { Image } from 'astro:assets';
import Modal from "./Modal.astro";

interface ImageWithCaption {
  src: any;
  alt: string;
  caption?: string;
  showCaption?: boolean;
}

interface Props {
  items: ImageWithCaption[];
}

const { items } = Astro.props;

<div class="image-grid">
  {items.map((item, index) => (
    <div class="image-item">
      <a href="#" class="modal-trigger" data-modal-id={`gallery-${index}`}>
        <Image 
          src={item.src}
          alt={item.alt}
          quality={100}
          format="webp"
        />
      </a>
      <Modal 
        id={`gallery-${index}`}
        imageUrl={item.src}
        imageAlt={item.alt}
      />
      {item.showCaption && item.caption && (
        <div class="image-caption">{item.caption}</div>
      )}
    </div>
  ))}
</div>

<style>
.image-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--size-lg);
  width: 100%;
}

.image-item {
  display: flex;
  flex-direction: column;
  gap: var(--size-sm);
}

.image-item img {
  width: 100%;
  height: auto;
  display: block;
  padding: 2px;
  border-radius: var(--border-radius-sm);
  border: 1px solid var(--color-edge-subtle);
  background-color: var(--color-white);
}

.image-caption {
  font-family: var(--font-display);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-normal);
  color: var(--color-ink-subtle);
  line-height: 1.4;
}
</style> 